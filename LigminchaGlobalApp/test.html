<!DOCTYPE html>
<html lang="en">
	<head>
		<title>Porthole Demo</title>
		<script type="text/javascript" src="/resources/porthole.js"></script>
		<script type="text/javascript">
			function onMessage(messageEvent) {  
				/*
			   messageEvent.origin: Protocol and domain origin of the message
			   messageEvent.data: Message itself
			   messageEvent.source: Window proxy object, useful to post a response 
			   */
			   console.log(messageEvent);
			}

			var windowProxy;
			window.onload=function(){ 
				// Create a proxy window to send to and receive 
				// messages from the iFrame
				windowProxy = new Porthole.WindowProxy(
					'http://www.organicdesign.co.nz/files/proxy.html', 'guestFrame');

				// Register an event handler to receive messages;
				windowProxy.addEventListener(onMessage);
			};

		</script>
	</head>
	<body>
		<iframe id="guestFrame" name="guestFrame" width="100%" height="50" src="http://www.organicdesign.co.nz/files/test.html"></iframe>
	</body>
</html>
